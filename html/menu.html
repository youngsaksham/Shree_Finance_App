<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Homepage</title>
    <link rel="stylesheet" href="../css/menu.css">    
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/main2.css">
</head>
<body>
  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.2.10/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.2.10/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.2.10/firebase-auth.js"></script>
  
  <!-- TODO: Add SDKs for Firebase products that you want to use
       https://firebase.google.com/docs/web/setup#available-libraries -->
  
  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyBqrojzrDw2ilF-tvngsSdqGEXpyZlNLUM",
      authDomain: "loanmanagmentsystem-ca528.firebaseapp.com",
      projectId: "loanmanagmentsystem-ca528",
      storageBucket: "loanmanagmentsystem-ca528.appspot.com",
      messagingSenderId: "873110986429",
      appId: "1:873110986429:web:0cacf8e6f88bcbf40ea1d4"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    </script>
    <header>
    <div class="wrapper">

<ul class="nav-area">
<li><a href="#">Home</a></li>
<li><a href="#calculator">Calculator</a></li>
<li><a href="#AddBorrower">Add A Borrower</a></li>
<li><a href="listOfBorrower.html">List Of Borrower</a></li>
<li><a href="myProfile.html">My Profile</a></li>
<li><a href="#about">About</a></li>
</ul>
<div class="logo">
    <img src="../img/logo.png" alt="">
</div>
<div class="logo">
    <img src="../img/bgpapa.png" style="margin-left: -200px; margin-top: 120px;" alt="">
</div>

</div>
<div class="welcome-text">
        <h1>
Welcome To <span>Shree Finance App</span></h1>
<a href="DueDateOfBorrower.html">Due Date Of Borrower</a>
    </div>
</header>

</body>

<section id="calculator" class="calculator">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
     <!-- CSS -->
     <link rel="stylesheet" href="../css/calculator.css">

    <title>Loan Calculator</title>
  </head>
  <body>

    <div class="container">
      <div class="row">
        <div class="col-md-6 mx-auto">
          <div class="card card-body text-center mt-5">
            <h1 class="heading display-5 pb-3">
              Loan Calculator
            </h1>
            <form  id="loan-form">
              <div class="form-group">
                <div class="input-group">
                  $
                  <input type="number" class="form-control" id="amount" placeholder="Loan Amount">
                </div>
              </div>
              <div class="form-group">
                <div class="input-group">
                  %
                  <input type="number" class="form-control" id="interest" placeholder="Interest">
                </div>
              </div>
              <div class="form-group">
                <input type="number" class="form-control" id="month" placeholder="Month to Repay">
              </div>
              <div class="form-group">
                <input type="submit" value="Calculate" class="btn btn-black btn-block">
              </div>
            </form>
            <!-- Loader -->
            <div id="loading">
              <img src="../img/loading.gif" alt="loader">
            </div>

            <!-- Result -->
           
           <div id="results" class="pt-4">
            <h5>Calculated Result</h5>
            <div class="form-group">
              <div class="input-group">
                <span class="input-group-text">Monthly Payment</span>
                <input type="number" class="form-control" id="monthly-payment" disabled>
              </div>
            </div>
            <div class="form-group">
              <div class="input-group">
                <span class="input-group-text">Total Payment</span>
                <input type="number" class="form-control" id="total-payment" disabled>
              </div>
            </div>
            <div class="form-group">
              <div class="input-group">
                <span class="input-group-text">Total Interest</span>
                <input type="number" class="form-control" id="total-interest" disabled>
              </div>
            </div>
           </div>
           <div class="form-group">
            <input type="reset" value="Reset" id="reset" class="btn btn-danger btn-block pt-3" style="background-color:#EE7C1F">
          </div>
          </div>
        </div>
      </div>
    </div>
    

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="../js/calculator.js"></script>
  </body>
</section>

<section id="AddBorrower" class="AddBorrower">
  <head>  
		<link rel="stylesheet" href="../css/AddBorrowerForm.css">
	</head>
  <center>
  <div class="wrapper">
    <div class="registration_form">
      <div class="title">
        Add a Borrower
      </div>
  
      <form>
        <div class="form_wrap">
          <div class="input_grp">
            <div class="input_wrap">
              <label for="fname">First Name</label>
              <input id="firstName" type="text" id="fname">
            </div>
            <div class="input_wrap">
              <label for="lname">Last Name</label>
              <input id="lastName" type="text" id="lname">
            </div>
          </div>
          <div class="input_wrap">
            <label for="email">Email Address</label>
            <input id="Email" type="text" id="email">
          </div>
          <div class="input_wrap">
            <label>Gender</label>
            <ul>
              <li>
                <label class="radio_wrap">
                  <input type="radio" name="gender" value="male" class="input_radio" checked>
                  <span>Male</span>
                </label>
              </li>
              <li>
                <label class="radio_wrap">
                  <input type="radio" name="gender" value="female" class="input_radio">
                  <span>Female</span>
                </label>
              </li>
            </ul>
          </div>
                  
          <div class="input_wrap">
            <label for="amount">Amount</label>
            <input type="text" id="amountInFirebase">
          </div>
                  
          <div class="input_wrap">
            <label for="Rate">Rate</label>
            <input type="text" id="RateInFirebase">
          </div>
                  
          <div class="input_wrap">
            <label for="numberOfMonthly-payment">Number Of Month</label>
            <input id="numberOfMonthInFirebase" type="text">
          </div>
  
          <div class="input_wrap">
            <label for="city">City</label>
            <input id="city" type="text" >
          </div>
          <div class="input_wrap">
            <label for="country">Country</label>
            <input id="country" type="text">
          </div>
          <div class="input_wrap">
            <input id="insert" type="submit" value="Add a Borrower" class="submit_btn">
          </div>
        </div>
      </form>
    </div>
  </div>
  <body>
    <script>
  var monthAmount;
  var lmn = 0;
var numberOfMonthV3;
var numberOfMonthV2;
var firstNameV;
var lastNameV;
var EmailV;
var amountV;
var RateV;
var numberOfMonthV;
var cityV;
var countryV;
var todayDay1 = new Date();
var todayMonthOfDay2 = todayDay1.getMonth();
var todayMonthOfDay = todayMonthOfDay2;
var todayYearOfDay2 = todayDay1.getFullYear();
var todayYearOfDay = todayYearOfDay2;
const dbRef = firebase.database().ref();
console.log("DB REF "+dbRef);

//var user = auth.currentUser;
//const user = firebase.auth().currentUser;
//var name, email, photoUrl, uid = "", emailVerified;

var uid;
var uids;


  function Ready(){
	firstNameV = document.getElementById("firstName").value;
	lastNameV = document.getElementById("lastName").value;
	EmailV = document.getElementById("Email").value;
	amountV = document.getElementById("amountInFirebase").value;
	RateV = document.getElementById("RateInFirebase").value;
	numberOfMonthV = document.getElementById("numberOfMonthInFirebase").value;
	cityV = document.getElementById("city").value;
	countryV = document.getElementById("country").value;
	console.log("i am ready");


}

	document.getElementById("insert").onclick = function(){
	var userIdLocal = "";		
	Ready();
  const principal = parseFloat(amountV);
  const calculatedInterest = parseFloat(RateV)/100/12;
  const calculatedPayments = parseFloat(numberOfMonthV);

  //compute monthly payment

const TheX = Math.pow(1 + calculatedInterest, calculatedPayments);
const monthly = (principal * TheX * calculatedInterest)/ (TheX-1);

alert(monthly)
//if(isFinite(monthly)){
//  var emi = monthly.toFixed(2);
//}
//	var amountVV = parseFloat(amountV);
//var annualRate = parseFloat(RateV);
//var numberOfMonthVV = parseFloat(numberOfMonthV);
//
//var RateVV = annualRate/(12*100);
//
//var x = amountVV * RateVV;
//var num = x * ((1+RateVV)**numberOfMonthVV);
//var den = ((1+RateVV)**numberOfMonthVV)-1;
//
//var emi = num/den;
//console.log(emi);

alert(todayMonthOfDay+"_"+numberOfMonthV);
		var count = 0;
		var x =parseInt(numberOfMonthV)+todayMonthOfDay ;
				firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
    // User is signed in.
userIdLocal = user.uid;
	    alert("user Present "+userIdLocal);
  } else {
    // No user is signed in.
    alert("user absent");
  }

for(let i = todayMonthOfDay-1; i < x; i++){
			count++;

			alert(user.uid);

//			lmn = i+1;
//console.log(lmn);
//			if(lmn  13){
//				lmn = 1;
//				//todayYearOfDay+1;
//			}
//var k;
//var p = k%12;

if((i+1)>12){
	lmn = (i+1)%12;
	if(lmn == 0){
lmn = 12;
	}
	if((i+1)%12 == 1){
 todayYearOfDay = todayYearOfDay+1;
}
}else{
	lmn = i+1;
}
//alert(lmn+"lmn is great"+todayYearOfDay);
//if (firebase.auth().currentUser !== null){
		// uid = user.uid;
        // console.log("user id: " + firebase.auth().currentUser.uid);

		const borrowerRef = dbRef.child("Investor/"+userIdLocal+'/MonthlyPayment/'+lmn+"_"+todayYearOfDay+'/'+firstNameV+"_"+lastNameV);
			alert("l")
		console.log(borrowerRef);
		borrowerRef.set({
		firstName:firstNameV,
		lastName:lastNameV,
		amount:monthly,
		Rate:RateV,
		numberOfMonth:numberOfMonthV
	})	;
	}
	alert("!@#$%^&*()"+count);

	console.log("Monthly Pement Added");
	const borrowerRef2 = dbRef.child("Investor/"+userIdLocal+'/listOfAllBorrower/'+firstNameV+"_"+lastNameV);
	alert("ll")
	borrowerRef2.set({
		firstName:firstNameV,
		lastName:lastNameV,
		amount:monthly,
		Rate:RateV,
		numberOfMonth:numberOfMonthV
	})	;
	console.log("list of borrower Added");
	const borrowerRef3 = dbRef.child("Investor/"+userIdLocal+'/Details/'+firstNameV+"_"+lastNameV);
	alert("lll")
	borrowerRef3.set({
		firstName:firstNameV,
		lastName:lastNameV,
		Email:EmailV,
		amount:monthly,
		Rate:RateV,
		numberOfMonth:numberOfMonthV,
		city:cityV,
		country:countryV
	})	;
	alert(EmailV)
	console.log("Details");
});
	}   
   </script>
  </body>
</center>
</section>

<section id="about" class="about">
  <head>
    <link rel="stylesheet" href="../css/aboutUs.css">
  </head>
  <div class="container flex items-center about-inner-wrap">
    <div class="flex-1">
        <img class="about-me-img" src="../img/pic.jpeg" alt="">
    </div>
    <div class="flex-1 right">
        <h1>About Me</h1>
        <h1>Hello! iâ€™m <span>Saksham Agrawal</span></h1>
        <p> "My name is Saksham Agrawal and I'm from a small village named Sarangi in India.
           Currently I'm pursuing my education and studying in class 8.
           I want to thank White Hat Jr for bringing out a software developer, a coder and an innovator in me.
           They have made it possible for a kid to build an application and apply the never ending ideas in his/her mind into real life applications that can be used nationwide or even globally.
           With White Hat Jr, coding seems fun and the one on one interaction is the best way one can learn and make mistakes as my teacher always say you have to make mistakes to learn and to move ahead in life.
           Also I believe that success is not a one day process and it comes with constant hard word and never giving up.
          So, it is better to fail trying than not trying at all.
          "
          </p>
    </div>
</div>
<picture>
  <source srcset="https://github.githubassets.com/images/modules/site/home/footer-illustration.webp" media="(min-width: 700px)" type="image/webp">
    <source srcset="https://github.githubassets.com/images/modules/site/home/footer-illustration-894.webp" type="image/webp">
    <source srcset="https://github.githubassets.com/images/modules/site/home/footer-illustration.svg" media="(min-width: 700px)" type="image/svg">
     <source srcset="https://github.githubassets.com/images/modules/site/home/footer-illustration-894.svg" type="image/svg">
  <img
    src="https://github.githubassets.com/images/modules/site/home/footer-illustration.svg"
    alt="Illustration of the evolution of development by octocats"
    width="1200"
    height="600"
    class="home-footer-illustration height-auto position-relative z-1 width-full d-block events-none" loading="lazy" decoding="async">
</picture>

<center>
<div>
  <div>
    
    <h2>Thank You</h2>
    <p> For Being A Great Investor</p>
</center>
</section>
<style type="text/css">
  .btn-chat{
border:none;
padding:0%;
text-transform: uppercase;
font-size: 20px;
position:fixed;
bottom: 7%;
right: 2%;
width: 5%;
height: 10%;
	margin: auto;
}

.btn-chat2{
border:none;
padding:0%;
text-transform: uppercase;
font-size: 20px;
position:fixed;
bottom: 2%;
right: 2%;
width: 5%;
height: 5%;
	margin: auto;
}
</style>
<a href="ChatApp.html"> <img class="btn-chat" src="../img/chatApp.png" alt="Chat"></a>
<h1 class="btn-chat2">Chat</h1>
</html>
